<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tamil cyber Zone AI</title>

  <style>
* { margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif; }

body {
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  background-color:#f0f2f5;
}

.chat-container {
  width:400px;
  height:600px;
  background-color:white;
  border-radius:10px;
  box-shadow:0 2px 10px rgba(0,0,0,0.1);
  display:flex;
  flex-direction:column;
}

.chat-header {
  padding:20px;
  background-color:#075e54;
  color:white;
  border-radius:10px 10px 0 0;
  text-align:center;
}

.chat-messages {
  flex:1;
  padding:20px;
  overflow-y:auto;
}

.message {
  margin-bottom:15px;
  max-width:80%;
  padding:10px 15px;
  border-radius:15px;
  word-wrap:break-word;
}

.bot-message {
  background-color:#e9ecef;
  align-self:flex-start;
  border-radius:15px 15px 15px 0;
}

.user-message {
  background-color:#075e54;
  color:white;
  margin-left:auto;
  border-radius:15px 15px 0 15px;
}

.chat-input {
  padding:20px;
  display:flex;
  gap:10px;
  border-top:1px solid #e9ecef;
}

#user-input {
  flex:1;
  padding:10px;
  border:1px solid #e9ecef;
  border-radius:5px;
  outline:none;
}

#send-button {
  padding:10px 20px;
  background-color:#075e54;
  color:white;
  border:none;
  border-radius:5px;
  cursor:pointer;
  transition: background-color 0.3s;
}
#send-button:hover { background-color:#128c7e; }

pre.code { background:#011421; padding:12px; border-radius:8px; overflow:auto; color:#cfe8ff; margin-top:10px; }
.sources { font-size:13px; color:#9fd3ff; margin-top:5px; word-wrap:break-word; }
a.link { color:#075e54; text-decoration:underline; }
</style>

</head>
<body>
<div class="chat-container">
  <div class="chat-header"><h1>AI Chatbot 2</h1></div>
  <div class="chat-messages" id="chat-messages">
    <div class="message bot-message">
      <p>வணக்கம்! நான் உங்கள் AI உதவியாளர். என்னை எப்படிக் கேட்க விரும்புகிறீர்கள்?</p>
    </div>
  </div>
  <div class="chat-input">
    <input type="text" id="user-input" placeholder="உங்கள் கேள்வியை இங்கு தட்டச்சு செய்யவும்...">
    <button id="send-button">Send</button>
  </div>
  <div id="answer" style="display: none;"></div>
  <div id="sources" class="sources"></div>
</div>

<script>
 
document.addEventListener("DOMContentLoaded", () => {
  const chatMessages = document.getElementById("chat-messages");
  const userInput = document.getElementById("user-input");
  const sendButton = document.getElementById("send-button");
  const answerEl = document.getElementById("answer");
  const sourcesEl = document.getElementById("sources");

  const knowledgeBase = {
    "toy car": { text:"ஒரு சிறிய டாய் கார் பிளாஸ்டிக் பாட்டில் அல்லது கார்ட்போர்டு உடையால் செய்யலாம்.", link:"https://www.wikihow.com/Make-a-Toy-Car" },
    "javascript": { text:"JavaScript என்பது வலைப்பக்கங்களை இயங்கக்கூடியதாக 만드는 programming மொழி.", link:"https://developer.mozilla.org/en-US/docs/Web/JavaScript" },
    "hallo": { text:"hallo how can i help you?", link:"data:image/jpeg;base64,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" },
    "how are you":{text:"i am fine"}
  };

  const codeTemplates = {
    "javascript":"// JavaScript example\nconsole.log('Hello World');",
    "python":"# Python example\nprint('Hello World')"
  };

  function addMessage(msg, isUser=false){
    const div = document.createElement('div');
    div.classList.add('message', isUser?'user-message':'bot-message');
    const p = document.createElement('p'); p.innerHTML = msg;
    div.appendChild(p);
    chatMessages.appendChild(div);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function getLocalResponse(input){
    const key = input.toLowerCase();
    for(const k in knowledgeBase){
      if(key.includes(k)) return knowledgeBase[k].text + (knowledgeBase[k].link?('<br><a class="link" href="'+knowledgeBase[k].link+'" target="_blank">Link</a>'):'');
    }
    return null;
  }

  function detectCode(input){
    const langs = Object.keys(codeTemplates);
    const wantsCode = /\b(write|make|code|function|class|app|program)\b/.test(input.toLowerCase());
    const lang = langs.find(l=>input.toLowerCase().includes(l));
    return wantsCode?lang:null;
  }

  async function fetchWikipedia(q){
    try{
      const r = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(q)}`);
      if(!r.ok) return null;
      const j = await r.json();
      return j.extract?{source:'Wikipedia', text:j.extract, link:j.content_urls?.desktop?.page||null}:null;
    }catch(e){return null;}
  }

  async function fetchDuckDuckGo(q){
    try{
      const r = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(q)}&format=json&no_redirect=1&skip_disambig=1`);
      if(!r.ok) return null;
      const j = await r.json();
      if(j.AbstractText) return {source:'DuckDuckGo', text:j.AbstractText, link:j.AbstractURL||null};
      return null;
    }catch(e){return null;}
  }

  async function gatherWebSources(q){
    const results = await Promise.all([fetchWikipedia(q), fetchDuckDuckGo(q)]);
    return results.filter(Boolean);
  }

  function synthesize(snippets){
    let combined='';
    snippets.forEach(s=>{
      combined += s.text + (s.link?('<br><a class="link" href="'+s.link+'" target="_blank">Link</a>'):'') + '<br><br>';
    });
    return combined;
  }

  async function handleInput(){
    const input = userInput.value.trim();
    if(!input) return;
    addMessage(input,true);
    userInput.value='';

    let localResp = getLocalResponse(input);
    if(localResp){
      addMessage(localResp);
      answerEl.innerHTML = localResp;
      sourcesEl.innerHTML = "<b>Source:</b> Local Knowledge";
      return;
    }

    const codeLang = detectCode(input);
    if(codeLang && codeTemplates[codeLang]){
      const code = codeTemplates[codeLang];
      addMessage('Code ('+codeLang+'):<br><pre class="code">'+code+'</pre>');
      answerEl.innerHTML = '<pre class="code">'+code+'</pre>';
      sourcesEl.innerHTML = "<b>Source:</b> Local Template";
      return;
    }

    addMessage("Searching web sources...");
    answerEl.textContent = "Working...";
    const webSnippets = await gatherWebSources(input);
    if(webSnippets.length===0){
      addMessage("No web data found.");
      answerEl.textContent = "No web data found or CORS blocked.";
      sourcesEl.innerHTML='';
      return;
    }

    const finalAnswer = synthesize(webSnippets);
    addMessage(finalAnswer);
    answerEl.innerHTML = finalAnswer;
    sourcesEl.innerHTML = "<b>Sources:</b> "+webSnippets.map(s=>s.source).join(', ');
  }

  sendButton.addEventListener('click', handleInput);
  userInput.addEventListener('keypress', e=>{ if(e.key==='Enter') handleInput(); });
});

</script>
<script>
  // Voice output function
  function speak(text){
    if('speechSynthesis' in window){
      const utter = new SpeechSynthesisUtterance(text.replace(/<br>/g,' '));
      // Try to select Tamil voice if available, fallback to default
      const voices = window.speechSynthesis.getVoices();
      const tamilVoice = voices.find(v=>v.lang.startsWith('ta')) || voices[0];
      if(tamilVoice) utter.voice = tamilVoice;
      window.speechSynthesis.speak(utter);
    }
  }

  async function handleInput(){
    const input = userInput.value.trim();
    if(!input) return;
    addMessage(input,true);
    userInput.value='';

    let localResp = getLocalResponse(input);
    if(localResp){
      addMessage(localResp);
      answerEl.innerHTML = localResp;
      sourcesEl.innerHTML = "<b>Source:</b> Local Knowledge";
      speak(localResp);
      return;
    }

    const codeLang = detectCode(input);
    if(codeLang && codeTemplates[codeLang]){
      const code = codeTemplates[codeLang];
      addMessage('Code ('+codeLang+'):<br><pre class="code">'+code+'</pre>');
      answerEl.innerHTML = '<pre class="code">'+code+'</pre>';
      sourcesEl.innerHTML = "<b>Source:</b> Local Template";
      speak("I have generated a "+codeLang+" code snippet for you.");
      return;
    }

    addMessage("Searching web sources...");
    answerEl.textContent = "Working...";
    const webSnippets = await gatherWebSources(input);
    if(webSnippets.length===0){
      addMessage("No web data found.");
      answerEl.textContent = "No web data found or CORS blocked.";
      sourcesEl.innerHTML='';
      speak("மன்னிக்கவும், இணையத்தில் தரவு கிடைக்கவில்லை.");
      return;
    }

    const finalAnswer = synthesize(webSnippets);
    addMessage(finalAnswer);
    answerEl.innerHTML = finalAnswer;
    sourcesEl.innerHTML = "<b>Sources:</b> "+webSnippets.map(s=>s.source).join(', ');
    // Voice output
    speak(finalAnswer);
  }
</script>

</body>
</html>













